[{"id": "apps/chronicler/webui/src/components/Ornaments.tsx::ParchmentTexture", "name": "ParchmentTexture", "kind": "component", "filePath": "apps/chronicler/webui/src/components/Ornaments.tsx", "sourceCode": "/* =========================================\n   ParchmentTexture component\n   Loads real parchment/vellum photos, processes\n   them through the canvas pipeline, and displays\n   as a repeating background with soft-light blend.\n   ========================================= */\n\nexport function ParchmentTexture({\n  className,\n  config = DEFAULT_PARCHMENT_CONFIG,\n  prebakedUrl\n}: Readonly<{\n  className?: string;\n  config?: ParchmentConfig;\n  /** Pre-baked tile URL \u2014 skips runtime canvas pipeline when provided */\n  prebakedUrl?: string;\n}>) {\n  const [textureUrl, setTextureUrl] = useState<string | null>(prebakedUrl ?? null);\n  const [prevUrl, setPrevUrl] = useState<string | null>(null);\n\n  // Regenerate when processing params change \u2014 opacity is CSS-only\n  // Skip entirely when a prebaked tile is provided\n  const genKey = JSON.stringify({\n    br: config.blurRadius,\n    ds: config.detailStrength\n  });\n  useEffect(() => {\n    if (prebakedUrl) return;\n    let cancelled = false;\n    async function generate() {\n      try {\n        const [parchmentImg, vellumImg] = await Promise.all([loadImage(parchmentSrc), loadImage(vellumSrc)]);\n        if (cancelled) return;\n\n        // Normalize both to working size\n        const pCanvas = drawScaled(parchmentImg, WORK_SIZE, WORK_SIZE);\n        const vCanvas = drawScaled(vellumImg, WORK_SIZE, WORK_SIZE);\n\n        // Pipeline: frequency blend \u2192 mirror tile\n        // Keep natural warm tones \u2014 soft-light blend adds organic warmth\n        const blended = frequencyBlend(pCanvas, vCanvas, config.blurRadius, config.detailStrength);\n        const tileable = mirrorTile(blended);\n        const url = await canvasToObjectURL(tileable);\n        if (!cancelled) {\n          setTextureUrl(url);\n        }\n      } catch (err) {\n        console.error(\"[ParchmentTexture] Failed to generate:\", err);\n      }\n    }\n    void generate();\n    return () => {\n      cancelled = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [prebakedUrl, genKey]);\n\n  // Revoke previous object URL to avoid memory leaks (only for generated URLs)\n  useEffect(() => {\n    if (prevUrl && prevUrl !== textureUrl && prevUrl !== prebakedUrl) {\n      URL.revokeObjectURL(prevUrl);\n    }\n    setPrevUrl(textureUrl);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [textureUrl]);\n\n  // Cleanup on unmount (only for generated URLs)\n  useEffect(() => {\n    return () => {\n      if (textureUrl && textureUrl !== prebakedUrl) URL.revokeObjectURL(textureUrl);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  if (!textureUrl) return null;\n\n  // Mirror tile is 2x WORK_SIZE\n  const tileSize = WORK_SIZE * 2;\n  return <div aria-hidden className={`${className ?? \"\"} ${ornStyles.parchmentTexture}`}\n  // eslint-disable-next-line local/no-inline-styles -- dynamic texture URL and opacity from canvas pipeline\n  style={{\n    \"--parchment-url\": `url(${textureUrl})`,\n    \"--parchment-size\": `${tileSize}px ${tileSize}px`,\n    \"--parchment-opacity\": config.opacity\n  } as React.CSSProperties} />;\n}", "parameters": [{"name": "{\n  className,\n  config = DEFAULT_PARCHMENT_CONFIG,\n  prebakedUrl\n}", "type": "Readonly<{\n  className?: string;\n  config?: ParchmentConfig;\n  /** Pre-baked tile URL \u2014 skips runtime canvas pipeline when provided */\n  prebakedUrl?: string;\n}>", "optional": false}], "returnType": "import(\"/home/tsonu/src/the-canonry/node_modules/.pnpm/@types+react@19.2.14/node_modules/@types/react/jsx-runtime\").JSX.Element | null", "jsxTree": {"tag": "div", "children": [], "isMap": false, "isConditional": false}, "hookCalls": [{"name": "useState", "count": 2}, {"name": "useEffect", "count": 3}], "imports": [{"source": "react", "specifiers": ["React", "useState", "useEffect", "useCallback"], "category": "framework"}, {"source": "../assets/textures/parchment.jpg", "specifiers": ["parchmentSrc"], "category": "internal"}, {"source": "../assets/textures/vellum.jpg", "specifiers": ["vellumSrc"], "category": "internal"}, {"source": "./Ornaments.module.css", "specifiers": ["ornStyles"], "category": "internal"}], "storeAccess": []}, {"id": "apps/chronicler/webui/src/components/Ornaments.tsx::ParchmentDebugPanel", "name": "ParchmentDebugPanel", "kind": "component", "filePath": "apps/chronicler/webui/src/components/Ornaments.tsx", "sourceCode": "export function ParchmentDebugPanel({\n  config,\n  onChange\n}: Readonly<{\n  config: ParchmentConfig;\n  onChange: (c: ParchmentConfig) => void;\n}>) {\n  const [open, setOpen] = useState(false);\n  const set = useCallback((key: keyof ParchmentConfig, val: number) => {\n    onChange({\n      ...config,\n      [key]: val\n    });\n  }, [config, onChange]);\n  if (!open) return <button className={ornStyles.debugBtn} onClick={() => setOpen(true)}>\n        Parchment Config\n      </button>;\n  return <div className={ornStyles.debugPanel}>\n      <div className={ornStyles.debugHeader}>\n        <strong className={ornStyles.debugTitle}>Parchment Config</strong>\n        <button onClick={() => setOpen(false)} className={ornStyles.debugClose}>\n          \u2715\n        </button>\n      </div>\n\n      <Slider label=\"Opacity\" value={config.opacity} min={0} max={1} step={0.01} onChange={v => set(\"opacity\", v)} />\n      <Slider label=\"Blur radius\" value={config.blurRadius} min={2} max={20} step={1} onChange={v => set(\"blurRadius\", v)} />\n      <Slider label=\"Detail\" value={config.detailStrength} min={0} max={3} step={0.1} onChange={v => set(\"detailStrength\", v)} />\n\n      <button onClick={() => onChange({\n      ...DEFAULT_PARCHMENT_CONFIG\n    })} className={ornStyles.resetBtn}>\n        Reset Defaults\n      </button>\n    </div>;\n}", "parameters": [{"name": "{\n  config,\n  onChange\n}", "type": "Readonly<{\n  config: ParchmentConfig;\n  onChange: (c: ParchmentConfig) => void;\n}>", "optional": false}], "returnType": "import(\"/home/tsonu/src/the-canonry/node_modules/.pnpm/@types+react@19.2.14/node_modules/@types/react/jsx-runtime\").JSX.Element", "jsxTree": {"tag": "button", "children": [], "isMap": false, "isConditional": false}, "hookCalls": [{"name": "useState", "count": 1}, {"name": "useCallback", "count": 1}], "imports": [{"source": "react", "specifiers": ["React", "useState", "useEffect", "useCallback"], "category": "framework"}, {"source": "../assets/textures/parchment.jpg", "specifiers": ["parchmentSrc"], "category": "internal"}, {"source": "../assets/textures/vellum.jpg", "specifiers": ["vellumSrc"], "category": "internal"}, {"source": "./Ornaments.module.css", "specifiers": ["ornStyles"], "category": "internal"}], "storeAccess": []}, {"id": "apps/chronicler/webui/src/components/Ornaments.tsx::PageFrame", "name": "PageFrame", "kind": "component", "filePath": "apps/chronicler/webui/src/components/Ornaments.tsx", "sourceCode": "export function PageFrame({\n  className\n}: Readonly<{\n  className?: string;\n}>) {\n  return <div aria-hidden=\"true\" className={`${className ?? \"\"} ${ornStyles.pageFrame}`}>\n      {/* Top-left */}\n      <div className={ornStyles.cornerTopLeft}>\n        <ScrollCorner />\n      </div>\n      {/* Top-right */}\n      <div className={ornStyles.cornerTopRight}>\n        <ScrollCorner />\n      </div>\n      {/* Bottom-left */}\n      <div className={ornStyles.cornerBottomLeft}>\n        <ScrollCorner />\n      </div>\n      {/* Bottom-right */}\n      <div className={ornStyles.cornerBottomRight}>\n        <ScrollCorner />\n      </div>\n    </div>;\n}", "parameters": [{"name": "{\n  className\n}", "type": "Readonly<{\n  className?: string;\n}>", "optional": false}], "returnType": "import(\"/home/tsonu/src/the-canonry/node_modules/.pnpm/@types+react@19.2.14/node_modules/@types/react/jsx-runtime\").JSX.Element", "jsxTree": {"tag": "div", "children": [{"tag": "div", "children": [{"tag": "ScrollCorner", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, {"tag": "div", "children": [{"tag": "ScrollCorner", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, {"tag": "div", "children": [{"tag": "ScrollCorner", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, {"tag": "div", "children": [{"tag": "ScrollCorner", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, "hookCalls": [], "imports": [{"source": "react", "specifiers": ["React", "useState", "useEffect", "useCallback"], "category": "framework"}, {"source": "../assets/textures/parchment.jpg", "specifiers": ["parchmentSrc"], "category": "internal"}, {"source": "../assets/textures/vellum.jpg", "specifiers": ["vellumSrc"], "category": "internal"}, {"source": "./Ornaments.module.css", "specifiers": ["ornStyles"], "category": "internal"}], "storeAccess": []}, {"id": "apps/chronicler/webui/src/components/Ornaments.tsx::SectionDivider", "name": "SectionDivider", "kind": "component", "filePath": "apps/chronicler/webui/src/components/Ornaments.tsx", "sourceCode": "/* ===================\n   SectionDivider\n   Ornamental filigree for section headings. Gold scrollwork\n   with frost blue accent tendrils. Replaces Unicode \u2766.\n   =================== */\n\nexport function SectionDivider({\n  className\n}: Readonly<{\n  className?: string;\n}>) {\n  return <svg aria-hidden=\"true\" viewBox=\"0 0 200 24\" className={className} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      {/* Center diamond */}\n      <path d=\"M100 4 L104 12 L100 20 L96 12 Z\" fill=\"#c49a5c\" opacity=\"0.7\" />\n\n      {/* Left scrollwork \u2014 gold main curve */}\n      <path d=\"M94 12 C85 12 78 6 65 6 C55 6 50 10 45 12 C40 14 35 14 28 12\" stroke=\"#c49a5c\" strokeWidth=\"1.2\" opacity=\"0.6\" strokeLinecap=\"round\" />\n      {/* Left frost accent tendril */}\n      <path d=\"M94 12 C87 14 80 18 68 16 C58 14 52 16 45 14\" stroke=\"#8ab4c4\" strokeWidth=\"0.8\" opacity=\"0.35\" strokeLinecap=\"round\" />\n\n      {/* Right scrollwork \u2014 gold main curve (mirrored) */}\n      <path d=\"M106 12 C115 12 122 6 135 6 C145 6 150 10 155 12 C160 14 165 14 172 12\" stroke=\"#c49a5c\" strokeWidth=\"1.2\" opacity=\"0.6\" strokeLinecap=\"round\" />\n      {/* Right frost accent tendril (mirrored) */}\n      <path d=\"M106 12 C113 14 120 18 132 16 C142 14 148 16 155 14\" stroke=\"#8ab4c4\" strokeWidth=\"0.8\" opacity=\"0.35\" strokeLinecap=\"round\" />\n\n      {/* Terminal frost dots */}\n      <circle cx=\"25\" cy=\"12\" r=\"1.5\" fill=\"#8ab4c4\" opacity=\"0.4\" />\n      <circle cx=\"175\" cy=\"12\" r=\"1.5\" fill=\"#8ab4c4\" opacity=\"0.4\" />\n    </svg>;\n}", "parameters": [{"name": "{\n  className\n}", "type": "Readonly<{\n  className?: string;\n}>", "optional": false}], "returnType": "import(\"/home/tsonu/src/the-canonry/node_modules/.pnpm/@types+react@19.2.14/node_modules/@types/react/jsx-runtime\").JSX.Element", "jsxTree": {"tag": "svg", "children": [{"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, "hookCalls": [], "imports": [{"source": "react", "specifiers": ["React", "useState", "useEffect", "useCallback"], "category": "framework"}, {"source": "../assets/textures/parchment.jpg", "specifiers": ["parchmentSrc"], "category": "internal"}, {"source": "../assets/textures/vellum.jpg", "specifiers": ["vellumSrc"], "category": "internal"}, {"source": "./Ornaments.module.css", "specifiers": ["ornStyles"], "category": "internal"}], "storeAccess": []}, {"id": "apps/chronicler/webui/src/components/Ornaments.tsx::FrostEdge", "name": "FrostEdge", "kind": "component", "filePath": "apps/chronicler/webui/src/components/Ornaments.tsx", "sourceCode": "/* ===================\n   FrostEdge\n   Ice crystalline decorative band with a visible frost-blue\n   background gradient. Irregular crystal spikes grow from a\n   frosted bar. For infobox edges, hero image bottoms, etc.\n   =================== */\n\nexport function FrostEdge({\n  position = \"top\",\n  className\n}: Readonly<{\n  position?: \"top\" | \"bottom\";\n  className?: string;\n}>) {\n  return <svg aria-hidden=\"true\" viewBox=\"0 0 260 12\" className={[className ?? \"\", position === \"bottom\" ? ornStyles.frostFlipped : \"\"].filter(Boolean).join(\" \")} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"none\">\n      {/* Frost background band \u2014 visible blue-tinted bar */}\n      <rect x=\"0\" y=\"6\" width=\"260\" height=\"6\" fill=\"#8ab4c4\" opacity=\"0.12\" />\n      {/* Frost gradient fade at the bar edge */}\n      <defs>\n        <linearGradient id={`frost-fade-${position}`} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n          <stop offset=\"0%\" stopColor=\"#8ab4c4\" stopOpacity=\"0\" />\n          <stop offset=\"60%\" stopColor=\"#8ab4c4\" stopOpacity=\"0.08\" />\n          <stop offset=\"100%\" stopColor=\"#8ab4c4\" stopOpacity=\"0.15\" />\n        </linearGradient>\n      </defs>\n      <rect x=\"0\" y=\"0\" width=\"260\" height=\"12\" fill={`url(#frost-fade-${position})`} />\n\n      {/* Crystal spikes \u2014 irregular heights, more prominent */}\n      <path d=\"M15,11 L17,5 L19,11 M35,11 L36,7 L37,11 M55,11 L57,2 L59,11\n           M75,11 L76,6 L77,11 M95,11 L97,1 L99,11 M115,11 L116,7 L117,11\n           M135,11 L137,0 L139,11 M155,11 L156,5 L157,11 M175,11 L177,2 L179,11\n           M195,11 L196,6 L197,11 M215,11 L217,1 L219,11 M240,11 L241,5 L242,11\" stroke=\"#8ab4c4\" strokeWidth=\"0.8\" opacity=\"0.4\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      {/* Filled crystal highlights on tallest spikes */}\n      <path d=\"M55,11 L57,2 L59,11 Z\" fill=\"#8ab4c4\" opacity=\"0.06\" />\n      <path d=\"M95,11 L97,1 L99,11 Z\" fill=\"#8ab4c4\" opacity=\"0.06\" />\n      <path d=\"M135,11 L137,0 L139,11 Z\" fill=\"#a8ccd8\" opacity=\"0.08\" />\n      <path d=\"M175,11 L177,2 L179,11 Z\" fill=\"#8ab4c4\" opacity=\"0.06\" />\n      <path d=\"M215,11 L217,1 L219,11 Z\" fill=\"#8ab4c4\" opacity=\"0.06\" />\n\n      {/* Crystal tip dots \u2014 glint effect */}\n      <circle cx=\"57\" cy=\"2\" r=\"0.8\" fill=\"#a8ccd8\" opacity=\"0.5\" />\n      <circle cx=\"97\" cy=\"1\" r=\"0.9\" fill=\"#a8ccd8\" opacity=\"0.5\" />\n      <circle cx=\"137\" cy=\"0\" r=\"1.0\" fill=\"#d0e8f0\" opacity=\"0.6\" />\n      <circle cx=\"177\" cy=\"2\" r=\"0.8\" fill=\"#a8ccd8\" opacity=\"0.5\" />\n      <circle cx=\"217\" cy=\"1\" r=\"0.9\" fill=\"#a8ccd8\" opacity=\"0.5\" />\n    </svg>;\n}", "parameters": [{"name": "{\n  position = \"top\",\n  className\n}", "type": "Readonly<{\n  position?: \"top\" | \"bottom\";\n  className?: string;\n}>", "optional": false}], "returnType": "import(\"/home/tsonu/src/the-canonry/node_modules/.pnpm/@types+react@19.2.14/node_modules/@types/react/jsx-runtime\").JSX.Element", "jsxTree": {"tag": "svg", "children": [{"tag": "rect", "children": [], "isMap": false, "isConditional": false}, {"tag": "defs", "children": [{"tag": "linearGradient", "children": [{"tag": "stop", "children": [], "isMap": false, "isConditional": false}, {"tag": "stop", "children": [], "isMap": false, "isConditional": false}, {"tag": "stop", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, {"tag": "rect", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "path", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}, {"tag": "circle", "children": [], "isMap": false, "isConditional": false}], "isMap": false, "isConditional": false}, "hookCalls": [], "imports": [{"source": "react", "specifiers": ["React", "useState", "useEffect", "useCallback"], "category": "framework"}, {"source": "../assets/textures/parchment.jpg", "specifiers": ["parchmentSrc"], "category": "internal"}, {"source": "../assets/textures/vellum.jpg", "specifiers": ["vellumSrc"], "category": "internal"}, {"source": "./Ornaments.module.css", "specifiers": ["ornStyles"], "category": "internal"}], "storeAccess": []}, {"id": "apps/chronicler/webui/src/hooks/useBreakpoint.ts::useBreakpoint", "name": "useBreakpoint", "kind": "hook", "filePath": "apps/chronicler/webui/src/hooks/useBreakpoint.ts", "sourceCode": "/**\n * Hook that returns the current breakpoint based on window width.\n * - mobile: < 640px\n * - tablet: 640-1023px\n * - desktop: >= 1024px\n */\nexport function useBreakpoint(): Breakpoint {\n  const [breakpoint, setBreakpoint] = useState<Breakpoint>(() =>\n    typeof window !== \"undefined\" ? getBreakpoint(window.innerWidth) : \"desktop\"\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setBreakpoint(getBreakpoint(window.innerWidth));\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return breakpoint;\n}", "parameters": [], "returnType": "Breakpoint", "jsxTree": null, "hookCalls": [{"name": "useState", "count": 1}, {"name": "useEffect", "count": 1}], "imports": [{"source": "react", "specifiers": ["useState", "useEffect"], "category": "framework"}], "storeAccess": []}]